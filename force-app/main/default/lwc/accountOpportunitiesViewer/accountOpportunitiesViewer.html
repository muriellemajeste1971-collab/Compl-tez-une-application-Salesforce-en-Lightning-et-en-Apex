<template>
    <lightning-card title="Opportunités du Compte" icon-name="standard:opportunity">
        <div class="slds-p-around_medium">
            <lightning-button
                label="Rafraîchir"
                variant="brand"
                onclick={handleRafraichir}>
            </lightning-button>
        </div>

        <!-- Spinner -->
        <template if:true={isLoading}>
            <div class="slds-p-around_medium">
                <lightning-spinner alternative-text="Chargement..." size="medium"></lightning-spinner>
            </div>
        </template>

        <!-- Tableau seulement si données -->
        <template if:true={hasOpportunities}>
            <lightning-datatable
                data={opportunities}
                columns={columns}
                key-field="Id">
            </lightning-datatable>
        </template>

        <!-- Message d'erreur (tableau vide OU erreur Apex) -->
        <template if:true={error}>
            <p class="slds-p-around_medium slds-text-color_error">
                {error}
            </p>
        </template>
    </lightning-card>
</template>
